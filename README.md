# RAID


RAID(Redundant Arrays of Independent Disks，RAID)：有“独立磁盘阵列构成的具有荣誉能力的阵列”之意
使用及工作方式；
磁盘阵列是由很多价格较便宜的磁盘，组合成一个容量巨大的磁盘组，利用个别磁盘提供数据所产生加成效果提升整个磁盘系统效能。利用这项技术，将数据切割成许多区段，分别存放在各个硬盘上。
磁盘阵列还能利用同位检查（Parity Check）的观念，在数组中任意一个磁盘故障时，仍可读出数据，在数据重构时，将数据经计算后重新置入新硬盘中。
把相同的数据存储在多个硬盘的不同的地方（因此，冗余地）的方法。通过把数据放在多个硬盘上，输入输出操作能以平衡的方式交叠，改良性能。因为多个硬盘增加了平均故障间隔时间（MTBF），储存冗余数据也增加了容错。

分类；
一、	外接式磁盘阵列柜
最常被使用大型服务器上，具可热交换（Hot Swap）的特性，不过这类产品的价格都很贵。
二、	内接式磁盘阵列卡
因为价格便宜，但需要较高的安装技术，适合技术人员使用操作。硬件阵列能够提供在线扩容、动态修改阵列级别、自动数据恢复、驱动器漫游、超高速缓冲等功能。它能提供性能、数据保护、可靠性、可用性和可管理性的解决方案。阵列卡专用的处理单元来进行操作。
三、	利用软件来仿真
通过网络操作系统自身提供的磁盘管理功能将连接的普通SCSI卡上的多块硬盘配置成逻辑盘，组成阵列。软件阵列可以提供数据冗余功能，但是磁盘子系统的性能会有所降低，有的降低幅度还比较大，达30%左右。因此会拖累机器的速度，不适合大数据流量的服务器。

原理：
	磁盘阵列作为独立系统在主机外直连或通过网络与主机相连。磁盘阵列有多个端口可以被不同主机或不同端口连接。一个主机连接阵列的不同端口可提升传输速度。
和当时PC用单磁盘内部集成缓存一样，在磁盘阵列内部为加快与主机交互速度，都带有一定量的缓冲存储器。主机与磁盘阵列的缓存交互，缓存与具体的磁盘交互数据。
在应用中，有部分常用的数据是需要经常读取的，磁盘阵列根据内部的算法，查找出这些经常读取的数据，存储在缓存中，加快主机读取这些数据的速度，而对于其他缓存中没有的数据，主机要读取，则由阵列从磁盘上直接读取传输给主机。对于主机写入的数据，只写在缓存中，主机可以立即完成写操作。然后由缓存再慢慢写入磁盘。

优缺点：
	优点：提高传输速率。RAID通过在多个磁盘上同时存储和读取数据来大幅提高存储系统的数据吞吐量（Throughput）。在RAID中，可以让很多磁盘驱动器同时传输数据，而这些磁盘驱动器在逻辑上又是一个磁盘驱动器，所以使用RAID可以达到单个磁盘驱动器几倍、几十倍甚至上百倍的速率。这也是RAID最初想要解决的问题。因为当时CPU的速度增长很快，而磁盘驱动器的数据传输速率无法大幅提高，所以需要有一种方案解决二者之间的矛盾。RAID最后成功了。
	通过数据校验提供容错功能。普通磁盘驱动器无法提供容错功能，如果不包括写在磁盘上的CRC（循环冗余校验）码的话。RAID容错是建立在每个磁盘驱动器的硬件容错功能之上的，所以它提供更高的安全性。在很多RAID模式中都有较为完备的相互校验/恢复的措施，甚至是直接相互的镜像备份，从而大大提高了RAID系统的容错度，提高了系统的稳定冗余性。

缺点：
	RAID0没有冗余功能，如果一个磁盘（物理）损坏，则所有的数据都无法使用。
	RAID1磁盘的利用率最高只能达到50%(使用两块盘的情况下)，是所有RAID级别中最低的。
	RAID0+1可以理解为是RAID 0和RAID 1的折中方案。RAID 0+1可以为系统提供数据安全保障，但保障程度要比 Mirror低而磁盘空间利用率要比Mirror高。

RAID级别：
1、	RAID 0：条带集 -（或条带卷）将数据平均分布到两个或两个以上磁盘中，不带冗余奇偶校验信息。
2、	RAID 1：镜像集 – 在两个或两个以上磁盘上创建一组数据的镜像或原样副本，提供针对单一磁盘故障的保护。
3、	RAID 0+1：条带的镜像 – 此种级别的 RAID 用于在多个磁盘之间共享和复制数据。
4、	RAID 5：分布式奇偶校验的独立磁盘结构。带奇偶校验的条带集– 需要至少三个磁盘，将带有奇偶校验数据的数据块级条带分布到所有磁盘中，这是一种实现低价冗余的理想方法。
5、	RAID 10：高可靠性与高效磁盘结构。镜像的条带 – 有时也称为 RAID 1+0，它与 RAID 0+1 类似，但既然 RAID 10 是镜像的条带，所以它与 RAID 0+1 恰好相反。
6、	串联：JBOD – “简单磁盘捆绑”，是一种将多个磁盘组合成单一虚拟硬盘的常见方法，这种方法无法享受 RAID 优势。
7、	RAID: LSI MegaRAID、Nytro和Syncro
8、	RAID 2：带海明码校验
9、	RAID 3：带奇偶校验码的并行传送
10、RAID 4：带奇偶校验码的独立磁盘结构
11、RAID 6：带有两种分布存储的奇偶校验码的独立磁盘结构
12、RAID 7：优化的高速数据传送磁盘结构
13、RAID 53：高效数据传送磁盘结构

RAID术语：
1.	条带化是指将数据分到多个驱动器上。条带 RAID 阵列通常用于将最大的容量合并到单个卷中。
2.	镜像是指将数据复制到多个磁盘上。镜像 RAID 阵列通常能在阵列中有磁盘（至少一个）发生故障时确保数据不丢失，具体取决于阵列的 RAID 级别。
3.	容错可让 RAID 阵列在磁盘发生故障时继续工作（即用户仍然可以使用阵列中存储的数据）。不过，并不是所有镜像 RAID 阵列都是用户友好的。例如，有些 RAID 设备必须在关闭后才能更换发生故障的磁盘，而设备支持“热插拔”式磁盘更换，因此可以在设备开启、而且数据可供访问的情况下更换故障磁盘。
应用：
1.	DAS--direct access storage device直接访问存储设备
2.	DAS是磁盘存储设备的术语，以前被用在大、中型机上。使用在PC机上还包括硬盘设备DAS的最新形式是RAID。“直接访问”指访问所有数据的时间是相同的。
3.	NAS--Network Attached Storage网络附加存储设备
4.	一种特殊目的的服务器，它具有嵌入式的软件系统，可以通过网络对个种的系统平台提供文件共享服务。
5.	SAN--Storage Area Networks存储区域网
6.	一种高速的专用网络，用于建立服务器、磁盘阵列和磁带库之间的一种直接联接。它如同扩展的存储器总线，将专用的集线器、交换器以及网关或桥路互相连接在一起。SAN常使用光纤通道。一个SAN可以是本地的或者是远程的，也可以是共享的或者是专用的。SAN打破了存储器与服务器之间的束缚，允许独立地选择最佳的存储器或者是最佳的服务器，从而提高可扩性和灵活性。

扩展：
	RAID 0的容量：
		C=n*d
			C=可用容量
			n=磁盘数
			d=磁盘容量
	RAID 1的容量：
		C=n*d/2
	RAID 3的容量：
		C=(n-1)*d
	RAID 3+spacede1容量：
		C=(n-2)*d
	RAID 5的容量：
		C=(n-1)*d
	RAID 5+space的容量：
		C=(n-2)*d
	RAID 6的容量：
		C=(n-2)*d
	RAID 0+1的容量：
		C=n*d/2
	RAID 1+0的容量：
		C=n*d/2
	串联的容量：
		C=n*d
	JBOD的容量：
		C=n*d

